---

description: "機能実装のためのタスクリストテンプレート"
---

# タスク: [機能名]

**入力**: `/specs/[###-feature-name]/`からの設計ドキュメント
**前提条件**: plan.md（必須）、spec.md（ユーザーストーリーに必須）、data-model.md、contracts/

**整理**: タスクはMVP達成に必要な機能単位でグループ化され、並列実行可能なまとまりになっています。

## 開発ワークフロー

### ブランチ戦略とコミットメッセージ

**ブランチ命名規則**: `{タイプ}/t{番号}-{簡潔な説明}`
- 例: `terraform/t001-infrastructure`（インフラ）
- 例: `feat/t002-config-utils`（機能）
- 例: `test/t008-local-testing`（テスト）

**コミットメッセージ形式**:
```
{タイプ}: {簡潔な説明}

{詳細な説明（オプション）}

関連: T{番号}
```

### タスク表記の説明

- **[並列OK]**: 他のタスクと並列実行可能
- **[依存あり]**: 特定のタスク完了後に実行可能
- **依存**: `→ T##` で依存するタスクを明記

<!--
  ============================================================================
  重要: 以下のタスクは説明目的のサンプルタスクです。

  /speckit.tasksコマンドは、これらを以下に基づく実際のタスクに置き換える必要があります：
  - spec.mdからのユーザーストーリー（優先度P1、P2、P3...付き）
  - plan.mdからの機能要件とアーキテクチャ
  - data-model.mdからのエンティティ
  - contracts/からのAPI契約

  タスク粒度のガイドライン：
  - 各タスクは1日〜数日で完了できる機能単位
  - 複数の小さなファイル（モデル、サービス、テスト等）は1つのタスクにまとめる
  - テストは実装タスクに含める（別タスクにしない）
  - 明確な成果物（動作する機能単位）を持つ
  - 並列実行可能性を考慮（異なるパッケージ/モジュール）

  生成されたtasks.mdファイルにこれらのサンプルタスクを残さないでください。
  ============================================================================
-->

### 実行順序の例

```
T001: インフラ構築（Terraform/Docker等）
  ↓
T002: 基盤パッケージ（設定、エラー、ログ等）並列OK
T003: データ永続化層（DB/ストレージ）並列OK
  ↓
T004: ユーザーストーリー1の機能A（並列OK）
T005: ユーザーストーリー1の機能B（並列OK）
  ↓
T006: メイン統合・オーケストレーション
  ↓
T007: ローカルテスト・デバッグ
  ↓
T008: デプロイとCI/CD
```

---

## T001: [インフラ構築] 🎯

**目的**: [インフラリソースの定義とセットアップ]

**成果物**:
- [具体的なファイルやリソース]
- [設定ファイル]
- [ドキュメント]

**タスク内容**:
1. [具体的な作業項目1]
2. [具体的な作業項目2]
3. [具体的な作業項目3]

**ブランチ**: `terraform/t001-infrastructure` または `feat/t01-project-setup`

**コミットメッセージ例**:
```
terraform: [変更内容の要約]

[詳細な説明]

関連: T001
```

**完了条件**:
- [ ] [検証可能な完了条件1]
- [ ] [検証可能な完了条件2]
- [ ] [検証可能な完了条件3]

**依存**: なし（最初に実行）

**参照**:
- [plan.md](plan.md)（関連セクション）

---

## T002: [基盤パッケージ・ユーティリティ] 🎯 [並列OK]

**目的**: [共通機能の実装]

**成果物**:
- [パッケージ名]（[含まれるファイル]）
- [パッケージ名]（[含まれるファイル]）
- テストファイル

**タスク内容**:
1. [パッケージA]を実装（[ファイル名、機能説明]）
2. [パッケージB]を実装（[ファイル名、機能説明]）
3. [ユニットテスト]を作成

**ブランチ**: `feat/t002-[簡潔な説明]`

**コミットメッセージ例**:
```
feat: [パッケージ群の要約]

[詳細な説明]

関連: T002
```

**完了条件**:
- [ ] 全パッケージにテストが含まれている
- [ ] [主要機能]が動作する
- [ ] [統合テスト]が成功

**依存**: T001完了後（[理由]）

**参照**:
- [data-model.md](data-model.md)
- [contracts/](contracts/)

---

## T003: [データ永続化層] 🎯 [並列OK]

**目的**: [データストレージ機能の実装]

**成果物**:
- [ストレージパッケージ]（[ファイル群]）
- [契約テスト]

**タスク内容**:
1. [クライアントラッパー]を実装
2. [CRUD操作]を実装
3. [契約テスト]を作成
4. [TTL/インデックス等の追加機能]

**ブランチ**: `feat/t003-[簡潔な説明]`

**コミットメッセージ例**:
```
feat: [ストレージ機能の要約]

[詳細な説明]

関連: T003
```

**完了条件**:
- [ ] [エミュレータ/ローカル環境]でテストが成功
- [ ] [主要操作]が正しく動作
- [ ] [追加要件]が実装されている

**依存**: T01, T002完了後

**参照**:
- [contracts/schema.md](contracts/schema.md)

---

## T004: [ユーザーストーリー1 - 機能A] 🎯 [並列OK]

**目的**: [この機能が提供する価値]

**成果物**:
- [パッケージ名]（[ファイル群]）
- [契約テスト]

**タスク内容**:
1. [サブ機能1]を実装
2. [サブ機能2]を実装
3. [統合部分]を実装
4. [テスト]を作成

**ブランチ**: `feat/t004-[簡潔な説明]`

**コミットメッセージ例**:
```
feat: [機能Aの要約]

[詳細な説明]

関連: T004
```

**完了条件**:
- [ ] [主要機能]が動作
- [ ] [テスト]が成功
- [ ] [統合ポイント]が確認済み

**依存**: T002完了後（[理由]）

**参照**:
- [contracts/api.md](contracts/api.md)

---

## T005: [ユーザーストーリー1 - 機能B] 🎯 [並列OK]

**目的**: [この機能が提供する価値]

**成果物**:
- [パッケージ名]（[ファイル群]）
- [契約テスト]

**タスク内容**:
1. [サブ機能1]を実装
2. [サブ機能2]を実装
3. [統合部分]を実装
4. [テスト]を作成

**ブランチ**: `feat/t005-[簡潔な説明]`

**コミットメッセージ例**:
```
feat: [機能Bの要約]

[詳細な説明]

関連: T005
```

**完了条件**:
- [ ] [主要機能]が動作
- [ ] [テスト]が成功
- [ ] [統合ポイント]が確認済み

**依存**: T002完了後（[理由]）

**参照**:
- [contracts/api.md](contracts/api.md)

---

## T006: [メイン統合・オーケストレーション] 🎯

**目的**: すべての機能を統合し、エンドツーエンドのフローを実装

**成果物**:
- [エントリーポイント]（[ファイル名]）
- [オーケストレーションロジック]

**タスク内容**:
1. [エントリーポイント]を実装
2. メインフローの実装:
   - [ステップ1]
   - [ステップ2]
   - [ステップ3]
3. エラーハンドリングとログ出力
4. [環境変数/設定]統合

**ブランチ**: `feat/t006-main-orchestration`

**コミットメッセージ例**:
```
feat: メイン統合を実装

[詳細な説明]

関連: T006
```

**完了条件**:
- [ ] ローカルで動作
- [ ] エンドツーエンドフローが完走
- [ ] エラーハンドリングが適切
- [ ] ログ出力が構造化されている

**依存**: T003, T004, T005完了後（すべての機能が必要）

**参照**:
- [spec.md](spec.md)（フロー全体）

---

## T007: [ローカルテスト・デバッグ] 🎯

**目的**: ローカル環境で全機能をテストし、バグを修正

**成果物**:
- テスト実行スクリプト
- デバッグログ
- バグ修正

**タスク内容**:
1. [環境設定]を準備
2. [エミュレータ/ローカルサービス]を起動
3. ローカルで実行
4. [実際のデータ]で動作確認
5. バグ修正とリファクタリング

**ブランチ**: `test/t007-local-testing`

**コミットメッセージ例**:
```
test: ローカルテストとバグ修正

[詳細な説明]

関連: T007
```

**完了条件**:
- [ ] ローカルで正常に動作
- [ ] [期待される出力]が確認できる
- [ ] エラーが適切にハンドリングされる

**依存**: T006完了後

---

## T008: [デプロイとCI/CD] 🎯

**目的**: [本番環境]にデプロイし、CI/CDパイプラインを構築

**成果物**:
- デプロイ済み[アプリケーション/サービス]
- CI/CD設定
- 監視設定

**タスク内容**:
1. [環境]作成と設定
2. [認証情報]設定
3. [インフラ]をデプロイ
4. [アプリケーション]をデプロイ
5. [スケジューラ/トリガー]の動作確認
6. CI/CD設定
7. 監視とアラート設定

**ブランチ**: `deploy/t008-deployment`

**コミットメッセージ例**:
```
deploy: [環境]デプロイとCI/CD設定

[詳細な説明]

関連: T008
```

**完了条件**:
- [ ] [アプリケーション]がデプロイされている
- [ ] [トリガー/スケジューラ]が動作している
- [ ] [期待される動作]が確認できる
- [ ] 監視とログが正常に動作

**依存**: T007完了後

**参照**:
- [quickstart.md](quickstart.md)

---

## 認証情報と環境設定

### 必要な認証情報

1. **[サービスA]**: [取得方法、使用タイミング]
2. **[サービスB]**: [取得方法、使用タイミング]

### 環境変数ファイル例

```bash
# .env（ローカル開発用、Gitignore対象）
[KEY1]=[値の説明]
[KEY2]=[値の説明]
```

### 認証フロー

```
T001: [初期セットアップ]
  ↓ [認証ステップ1]
T002-T006: ローカル開発
  ↓ [認証ステップ2]
T007: ローカルテスト
  ↓ [認証ステップ3]
T008: デプロイ
  ↓ [認証ステップ4]
```

---

## タスク一覧（チェックリスト）

- [ ] T001: [タスク名]
- [ ] T002: [タスク名]（並列OK）
- [ ] T003: [タスク名]（並列OK）
- [ ] T004: [タスク名]（並列OK）
- [ ] T005: [タスク名]（並列OK）
- [ ] T006: [タスク名]
- [ ] T007: [タスク名]
- [ ] T008: [タスク名]

**MVP完成**: T[最終番号]完了時点

---

## タスク設計のガイドライン

### 適切な粒度

- **1タスク = 1日〜数日の作業量**
- 複数の関連ファイル（モデル、サービス、テスト）は1タスクにまとめる
- テストは実装タスクに含める（別タスクにしない）
- 明確な成果物（動作する機能単位）を定義

### 並列実行可能性

- 異なるパッケージ/モジュールは並列実行可能
- 依存関係を明確にする
- ファイルの競合を避ける

### 完了条件

- 検証可能な条件を列挙
- テストの成功を含める
- 動作確認の方法を明記

### ブランチとコミット

- タスクごとに専用ブランチを作成
- コミットメッセージに関連タスクIDを含める
- 完了後にmainにマージ
